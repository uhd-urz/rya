[tasks.apply-vendors]
description = "Downloads and adds vendor packages defined in pyproject.toml via vendy"
run = """
printf "\n"
printf "Installing uv dev dependencies..."
printf "\n"
printf "_________________________________"
printf "\n\n"
uv sync --group dev --all-extras
printf "\n"
printf "Downloading vendor packages with vendy..."
printf "\n"
printf "_________________________________________"
printf "\n\n"
.venv/bin/python -m vendy
printf "\n"
printf "Removing unnecessary haggis files/folder..."
printf "\n"
printf "___________________________________________"
printf "\n\n"
find src/pj/_vendor/haggis ! \\( -name 'logs.py' -or -name 'LICENSE' -or -name '__init__.py' \\
-or -name 'version.py' \\) -type f -exec rm -f {} +
rm -rvf src/pj/_vendor/haggis/files src/pj/_vendor/haggis/gui src/pj/_vendor/haggis/tests
rm src/pj/_vendor/README.md src/pj/_vendor/LICENSE src/pj/_vendor/CHANGELOG
printf "\n"
printf "Vendor installation is successful."
"""
